(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-payment-auth"],{"17bb":function(t,e,i){var n=i("2bc6");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("967d").default;o("c05cf204",n,!0,{sourceMap:!1,shadowMode:!1})},"2bc6":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".content[data-v-0dbb9234]{position:relative;height:80vh}.content-c[data-v-0dbb9234]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center}.load-img[data-v-0dbb9234]{width:%?100?%;height:%?100?%}.load-text[data-v-0dbb9234]{font-size:%?26?%}",""]),t.exports=e},"4e38":function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa");var n={data:function(){return{type:"",openid:"",orderId:"",state:""}},onLoad:function(t){this.orderId=t.order_id,this.money=Number(t.money),this.type=Number(t.type),this.uid=Number(t.uid),this.state=this.$common.getQueryString("state"),this.getCode()},methods:{getCode:function(){var t=this.$common.getQueryString("code");t&&this.getOpenId(t)},getOpenId:function(t){var e=this,i={code:t,scope:2,state:this.state};this.$api.getOpenId(i,(function(t){t.status?(e.openid=t.data.openid,e.toPayHandler("wechatpay")):e.$common.errorToShow(t.msg)}))},checkWXJSBridge:function(t){var e=this,i=setInterval((function(){"undefined"!=typeof window.WeixinJSBridge&&(clearTimeout(i),e.onBridgeReady(t))}),200)},onBridgeReady:function(t){var e=this;window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appid,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},(function(i){"get_brand_wcpay_request:ok"===i.err_msg?e.$common.successToShow("支付成功"):"get_brand_wcpay_request:cancel"===i.err_msg?e.$common.errorToShow("取消支付"):e.$common.errorToShow("支付失败"),setTimeout((function(){e.$common.redirectTo("/pages/goods/payment/result?id="+t.payment_id)}),1e3)}))},toPayHandler:function(t){var e=this,i={payment_code:t,payment_type:this.type};i["ids"]=1==this.type||5==this.type||6==this.type?this.orderId:this.uid,1==this.type&&this.orderId?this.openid&&(i["params"]={trade_type:"JSAPI_OFFICIAL",openid:this.openid}):2==this.type&&this.money?this.openid&&(i["params"]={trade_type:"JSAPI_OFFICIAL",money:this.money,openid:this.openid}):5!=this.type&&6!=this.type||!this.orderId||this.openid&&(i["params"]={trade_type:"JSAPI_OFFICIAL",openid:this.openid,formid:this.orderId}),this.$api.pay(i,(function(t){if(t.status){var i=t.data;e.checkWXJSBridge(i)}else e.$common.errorToShow(t.msg)}))}}};e.default=n},5760:function(t,e,i){"use strict";i.r(e);var n=i("4e38"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},6168:function(t,e,i){"use strict";i.r(e);var n=i("903f"),o=i("5760");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("69cd");var s=i("828b"),r=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"0dbb9234",null,!1,n["a"],void 0);e["default"]=r.exports},"69cd":function(t,e,i){"use strict";var n=i("17bb"),o=i.n(n);o.a},"903f":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticClass:"content-c"},[e("v-uni-image",{staticClass:"load-img",attrs:{src:"/static/image/loading.gif",mode:""}}),e("v-uni-view",{staticClass:"load-text color-9"},[this._v("信息加载中.....")])],1)],1)},o=[]}}]);