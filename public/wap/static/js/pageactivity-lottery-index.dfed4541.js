(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pageactivity-lottery-index"],{"2ec5":function(t,i,e){"use strict";t.exports=function(t,i){return i||(i={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),i.hash&&(t+=i.hash),/["'() \t\n]/.test(t)||i.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"365a":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){}));var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"conbox"},[e("v-uni-view",{staticClass:"container"},[e("v-uni-image",{staticClass:"cont",attrs:{src:"/static/img/bg.png",mode:""}}),e("v-uni-image",{staticClass:"caidai",attrs:{src:"/static/img/caidai.png",mode:""}}),e("v-uni-view",{staticClass:"header"},[e("v-uni-view",{staticClass:"header-title"},[e("v-uni-view",{staticClass:"left"},[t._v("免费次数："),e("v-uni-text",{staticStyle:{color:"#E4431A"}},[t._v(t._s(t.chishu))])],1),e("v-uni-view",{staticClass:"left"},[t._v("账户积分："),e("v-uni-text",{staticStyle:{color:"#E4431A"}},[t._v(t._s(t.jifen))])],1),e("v-uni-view",{staticClass:"right",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getmyPrize.apply(void 0,arguments)}}},[t._v("抽奖记录 >")])],1)],1),e("v-uni-view",{staticClass:"main"},[e("v-uni-view",{staticClass:"canvas-container"},[e("v-uni-view",{staticClass:"canvas-content",attrs:{animation:t.animationData,id:"zhuanpano"}},[e("v-uni-view",{staticClass:"canvas-line"},t._l(t.awardsList,(function(t,i){return e("v-uni-view",{key:i,staticClass:"canvas-litem",style:[{transform:"rotate("+t.lineTurn+")"}]})})),1),e("v-uni-view",{staticClass:"canvas-list"},t._l(t.awardsList,(function(i,a){return e("v-uni-view",{key:a,staticClass:"canvas-item",style:[{zIndex:a}]},[e("v-uni-view",{staticClass:"canvas-item-text",style:[{transform:"rotate("+i.turn+")"}]},[e("v-uni-text",[t._v(t._s(i.award))]),0==i.type?e("v-uni-image",{staticClass:"canvas-item-text-img",attrs:{src:"/static/img/kongjiang.png"}}):t._e(),1==i.type?e("v-uni-image",{staticClass:"canvas-item-text-img",attrs:{src:"/static/img/jifen.png"}}):t._e(),2==i.type?e("v-uni-image",{staticClass:"canvas-item-text-img",attrs:{src:"/static/img/youhuiquan.png"}}):t._e(),3==i.type?e("v-uni-image",{staticClass:"canvas-item-text-img",attrs:{src:"/static/img/yue.png"}}):t._e(),4==i.type?e("v-uni-image",{staticClass:"canvas-item-text-img",attrs:{src:"/static/img/shangpin.png"}}):t._e()],1)],1)})),1)],1),e("v-uni-view",{staticClass:"canvas-btn",class:t.btnDisabled,on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.playReward.apply(void 0,arguments)}}},[t._v("开始")])],1)],1),e("v-uni-view",{staticClass:"typecheckbox"}),e("v-uni-view",{staticClass:"guize"},[e("v-uni-view",{staticClass:"title"},[t._v("规则说明")]),t._l(t.awardsConfig.rule,(function(i,a){return e("v-uni-view",{key:a,staticClass:"g_item"},[t._v(t._s(i))])}))],2),e("v-uni-view",{staticClass:"typecheckbox2"}),t.r_flg?e("v-uni-view",{staticClass:"shadowbox",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.closeshadow.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"myrewards",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.openshadow.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"title"},[t._v("抽奖记录")]),e("v-uni-view",{staticClass:"itembox"},t._l(t.myPrizelist,(function(i,a){return e("v-uni-view",{key:a,staticClass:"item"},[e("div",{staticClass:"t"},[e("v-uni-text",{staticClass:"left"},[t._v(t._s(i.name))]),e("v-uni-text",{staticClass:"right"},[t._v(t._s(i.ctime_name))])],1),e("div",{staticClass:"b"},[t._v(t._s(i.prize_content))])])})),1)],1)],1):t._e()],1)],1)},n=[]},"3caf":function(t,i,e){"use strict";e.r(i);var a=e("810a"),n=e.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);i["default"]=n.a},"457b":function(t,i,e){"use strict";var a=e("5438"),n=e.n(a);n.a},5438:function(t,i,e){var a=e("8651");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("967d").default;n("882136f0",a,!0,{sourceMap:!1,shadowMode:!1})},"810a":function(t,i,e){"use strict";e("6a54"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("bf0f"),e("2797"),e("aa9c"),e("08eb"),e("18f7");var a={data:function(){return{awardsConfig:{chance:!0,prize:[]},awardsList:{},animationData:{},btnDisabled:"",thanksarr:[],chishu:0,mold:1,r_flg:0,myPrizelist:[],jifen:0}},onLoad:function(){this.initdata(this)},onReady:function(t){},methods:{getmyPrize:function(){var t=this;this.$api.myLottery({page:1,limit:1e3},(function(i){t.myPrizelist=i.data,t.r_flg=1}))},openshadow:function(){this.r_flg=1},closeshadow:function(){this.r_flg=0},initdata:function(t){var i=this;this.$api.lotteryConfig((function(t){if(t.status){i.awardsConfig=t.data,i.chishu=t.data.user.day_remaining,i.jifen=t.data.user.jifen;i.awardsConfig.prize.length;i.awardsConfig.prize.forEach((function(t,i){t.index=i})),i.drawAwardRoundel()}else i.$common.errorToShow(t.msg,(function(){uni.navigateBack({delta:1})}))}))},drawAwardRoundel:function(){for(var t=this.awardsConfig.prize,i=[],e=1/t.length*360,a=0;a<t.length;a++)i.push({turn:a*e+"deg",lineTurn:a*e+e/2+"deg",award:t[a].title,type:t[a].type,id:t[a].id});this.chishu<1&&this.jifen<this.awardsConfig.integral_exchange?this.btnDisabled="disabled":this.awardsConfig.user.lottery?this.btnDisabled="":this.btnDisabled="disabled",this.awardsList=i},playReward:function(){var t=this;if(this.chishu<1){if(this.jifen<this.awardsConfig.integral_exchange)return this.$common.errorToShow("抽奖次数已经用完"),!1;this.jifen>=this.awardsConfig.integral_exchange&&this.$common.modelShow("提示","本次抽奖将消耗"+this.awardsConfig.integral_exchange+"积分，确认吗？",(function(i){t.lottery()}))}else this.lottery()},lottery:function(){var t=this;this.$api.lottery((function(i){if(i.status){var e=0,a=i.data.result;t.awardsList.forEach((function(t,i){t.id==a.id&&(e=i)}));var n=t.awardsConfig.prize;t.runDeg=t.runDeg||0;var s=t.runDeg;t.runDeg=t.runDeg+(360-t.runDeg%360)+(1440-e*(360/n.length))+1,document.getElementById("zhuanpano").style="animation:rotate_before 4s 0ms ease forwards;",document.styleSheets[0].cssRules.length>0&&Array.from(document.styleSheets[0].cssRules).forEach((function(t,i){"rotate_before"==t.name&&document.styleSheets[0].deleteRule(i)})),document.styleSheets[0].insertRule("@keyframes rotate_before{from{ transform: rotate("+s+"deg); }to{ transform: rotate("+t.runDeg+"deg);}}",8),t.btnDisabled="disabled";var o=t.awardsConfig,r=o.prize[e].type;if(t.jifen=t.chishu<=0?t.jifen-o.integral_exchange>=0?t.jifen-o.integral_exchange:0:t.jifen,t.chishu=t.chishu>1?t.chishu-1:0,0!=r){var d=t.getPrizeMsg(o.prize[e].type,o.prize[e].val);setTimeout(function(){this.$common.modelShow("恭喜","获得"+o.prize[e].title+"，"+d,(function(t){setTimeout((function(){document.getElementById("zhuanpano").style=""}),1e3)}),!1),i.data.is_lottery.lottery?this.btnDisabled="":this.btnDisabled="disabled"}.bind(t),3686)}else setTimeout(function(){this.$common.modelShow("很遗憾","没中奖，再接再厉！",(function(t){setTimeout((function(){document.getElementById("zhuanpano").style=""}),1e3)}),!1),i.data.is_lottery.lottery?this.btnDisabled="":this.btnDisabled="disabled"}.bind(t),3686)}else t.$common.modelShow("提示",i.msg)}))},getPrizeMsg:function(t,i){var e="";switch(t){case 1:e="积分："+i+"个";break;case 2:e="优惠券：“"+i+"” 一张";break;case 3:e="余额："+i+"元";break;case 4:e="商品：“"+i+"”";break;default:break}return e}}};i.default=a},8651:function(t,i,e){var a=e("c86c"),n=e("2ec5"),s=e("9386");i=a(!1);var o=n(s);i.push([t.i,".conbox[data-v-b8b4ba62]{width:%?750?%;height:100vh;overflow-x:hidden;overflow-y:scroll}.container[data-v-b8b4ba62],\n\tuni-image.cont[data-v-b8b4ba62]{width:%?750?%;min-height:100vh;height:auto;position:relative}uni-image.cont[data-v-b8b4ba62]{height:100%;position:absolute;z-index:0}uni-image.caidai[data-v-b8b4ba62]{position:absolute;top:0;left:0;width:%?750?%;height:%?1024?%}.header[data-v-b8b4ba62]{display:flex;flex-direction:column;align-items:center;justify-content:center;\n\t\t/* height: 246upx; */padding-top:%?48?%;padding-bottom:%?40?%;box-sizing:border-box;position:relative;z-index:3}.header-title[data-v-b8b4ba62]{width:100%;height:%?60?%;display:flex;align-items:center;padding:0 %?48?%;box-sizing:border-box;justify-content:space-between}.header-title>uni-view[data-v-b8b4ba62]{padding:%?8?% %?16?%;border:1px solid #d89720;color:#d89720;font-size:%?28?%;border-radius:%?26?%}\n\n\t/* 转盘 */.canvas-container[data-v-b8b4ba62]{margin:0 auto;position:relative;width:%?600?%;height:%?600?%;background:url("+o+') no-repeat;background-size:cover;border-radius:50%}.canvas[data-v-b8b4ba62]{width:100%;height:100%;display:block!important;border-radius:50%}.canvas-content[data-v-b8b4ba62]{position:absolute;left:0;top:0;z-index:1;display:block;width:%?600?%;height:%?600?%;border-radius:inherit\n\t\t/* background-clip: padding-box; */\n\t\t/* background-color: #ffcb3f; */}.canvas-element[data-v-b8b4ba62]{position:relative;z-index:1;width:inherit;height:inherit;border-radius:50%}.canvas-list[data-v-b8b4ba62]{position:absolute;left:0;top:0;width:inherit;height:inherit;z-index:9999}.canvas-item[data-v-b8b4ba62]{position:absolute;left:0;top:0;width:100%;height:100%;color:#e4370e\n\t\t/* text-shadow: 0 1upx 1upx rgba(255, 255, 255, 0.6); */}.canvas-item-text[data-v-b8b4ba62]{position:relative;display:block;padding-top:%?46?%;margin:0 auto;text-align:center;-webkit-transform-origin:50% %?300?%;transform-origin:50% %?300?%;display:flex;flex-direction:column;align-items:center;color:#fb778b}.canvas-item-text uni-text[data-v-b8b4ba62]{font-size:%?30?%}.canvas-item-text-img[data-v-b8b4ba62]{width:%?50?%;height:%?50?%;padding-top:%?30?%}\n\n\t/* 分隔线 */.canvas-line[data-v-b8b4ba62]{position:absolute;left:0;top:0;width:inherit;height:inherit;z-index:99}.canvas-litem[data-v-b8b4ba62]{position:absolute;left:%?300?%;top:0;width:%?3?%;height:%?300?%;background-color:rgba(228,55,14,.4);overflow:hidden;-webkit-transform-origin:50% %?300?%;transform-origin:50% %?300?%}\n\n\t/**  \n* 抽奖按钮  \n*/.canvas-btn[data-v-b8b4ba62]{position:absolute;left:%?260?%;top:%?260?%;z-index:400;width:%?80?%;height:%?80?%;border-radius:50%;color:#f4e9cc;background-color:#e44025;line-height:%?80?%;text-align:center;font-size:%?26?%;text-shadow:0 -1px 1px rgba(0,0,0,.6);box-shadow:0 3px 5px rgba(0,0,0,.6);text-decoration:none}.canvas-btn[data-v-b8b4ba62]::after{position:absolute;display:block;content:" ";left:%?12?%;top:%?-44?%;width:0;height:0;overflow:hidden;border-width:%?30?%;border-style:solid;border-color:transparent;border-bottom-color:#e44025}.canvas-btn.disabled[data-v-b8b4ba62]{pointer-events:none;background:#b07a7b;color:#ccc}.canvas-btn.disabled[data-v-b8b4ba62]::after{border-bottom-color:#b07a7b}.canvas-btn-table[data-v-b8b4ba62]{color:#a83fdb;width:%?120?%;text-align:center;position:absolute;left:%?240?%;top:%?360?%;font-size:%?26?%;background-color:#fff;opacity:.9}.typecheckbox[data-v-b8b4ba62]{width:100%;position:relative;z-index:3;display:flex;justify-content:space-between;padding:%?20?%;box-sizing:border-box;color:#fff;font-size:%?28?%;top:%?-120?%;flex-direction:column;height:%?180?%;align-items:flex-end\n\t\t/* padding-top: 46upx; */}.typecheckbox2[data-v-b8b4ba62]{width:100%;position:relative;z-index:3;display:flex;justify-content:space-between;padding:%?20?%;box-sizing:border-box;color:#fff;font-size:%?28?%;top:%?-120?%;flex-direction:column;height:%?120?%;align-items:flex-end\n\t\t/* padding-top: 46upx; */}.typecheckbox uni-view[data-v-b8b4ba62]{border:1px solid #ff3637;background:transparent;color:#ff3637;display:flex;height:%?60?%;width:%?140?%;border-radius:%?50?%;align-items:center;justify-content:center;display:flex;margin-left:%?20?%}.typecheckbox uni-view.active[data-v-b8b4ba62]{background:#ff3637;color:#fff}.guize[data-v-b8b4ba62]{width:%?502?%;min-height:%?300?%;display:flex;flex-direction:column;position:relative;z-index:3;background-image:linear-gradient(-180deg,#f48549,#f2642e);border:%?18?% solid #e4431a;border-radius:16px;margin:0 auto;margin-top:%?-104?%;padding:%?48?%;\n\t\t/* box-sizing: border-box; */color:#fff}.guize .title[data-v-b8b4ba62]{text-align:center;margin-bottom:%?28?%}.guize .g_item[data-v-b8b4ba62]{font-family:PingFang-SC-Medium;font-size:%?24?%;color:#fff;letter-spacing:.5px;text-align:justify;line-height:20px}.shadowbox[data-v-b8b4ba62]{width:%?750?%;height:100vh;position:fixed;top:0;left:0;z-index:999;background:rgba(0,0,0,.6);display:flex;justify-content:center;align-items:center}.myrewards[data-v-b8b4ba62]{width:%?600?%;min-height:%?80?%;background:#ffeedf;border:%?10?% solid #f2692f;color:#333;font-size:%?24?%;font-family:PingFang-SC-Medium;border-radius:%?40?%;padding:0 %?24?% %?20?%}.myrewards .title[data-v-b8b4ba62]{font-family:PingFang-SC-Bold;font-size:16px;color:#e4431a;letter-spacing:.57px;display:flex;padding-top:%?36?%;justify-content:center}.myrewards .itembox[data-v-b8b4ba62]{max-height:%?320?%;overflow-y:auto}.myrewards .item[data-v-b8b4ba62]{width:100%;padding:%?12?% 0;box-sizing:border-box;border-bottom:%?1?% dashed #ccc}.myrewards .item .t[data-v-b8b4ba62]{display:flex;justify-content:space-between;align-items:center;margin-bottom:%?10?%}.myrewards .item .b[data-v-b8b4ba62]{font-size:12px;color:#999;text-align:left}',""]),t.exports=i},"8e1a":function(t,i,e){"use strict";e.r(i);var a=e("365a"),n=e("3caf");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("457b");var o=e("828b"),r=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"b8b4ba62",null,!1,a["a"],void 0);i["default"]=r.exports},9386:function(t,i,e){t.exports=e.p+"static/img/circle.png"}}]);